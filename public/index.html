<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ุชุญููู ุจูุณ | Video Downloader Pro</title>
    <meta name="description" content="ูู ุจุชูุฒูู ููุงุทุน ุงูููุฏูู ุงูููุถูุฉ ูุฏูู ุจุณุฑุนุฉ ูุงุฆูุฉ ูู ููุชููุจ ูููุณุจูู ูุงูุณุชุบุฑุงู">

    <!-- PWA Meta Tags -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#1976d2">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="ุชุญููู ุจูุณ">
    <link rel="apple-touch-icon" href="/icons/icon-192x192.png">

    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Supabase Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>

<body>
    <!-- Confetti Container -->
    <div id="confettiContainer" class="confetti-container"></div>

    <!-- Notifications Container -->
    <div id="notifications" class="notifications-container"></div>

    <!-- Header -->
    <header class="header">
        <div class="header-top">
            <div class="logo">
                <span class="logo-icon">โฌ๏ธ</span>
                <div class="logo-text">
                    <h1>ุชุญููู ุจูุณ <span class="ultra-badge">PRO</span></h1>
                </div>
            </div>
            <div class="header-actions">
                <button id="installPwaBtn" class="primary-btn hidden" onclick="installPwa()"
                    style="padding: 0.5rem 1rem; font-size: 0.9rem;">
                    ๐ฒ ุชุซุจูุช ุงูุชุทุจูู
                </button>
                <button id="themeToggle" class="icon-btn" title="ุชุจุฏูู ุงููุถุน">
                    <span class="theme-icon">๐</span>
                </button>
                <button id="langToggle" class="icon-btn" title="ุงููุบุฉ">๐</button>
                <button id="settingsBtn" class="icon-btn" title="ุงูุฅุนุฏุงุฏุงุช">โ๏ธ</button>
                <button id="statsBtn" class="icon-btn" title="ุงูุฅุญุตุงุฆูุงุช">๐</button>
                <!-- User Auth Button -->
                <div id="authContainer" class="auth-container">
                    <button id="authBtn" class="icon-btn user-btn" title="ุชุณุฌูู ุงูุฏุฎูู"
                        onclick="openAuthModal()">๐ค</button>
                    <div id="userMenu" class="user-menu hidden">
                        <span id="userName">ุงููุณุชุฎุฏู</span>
                        <button id="logoutBtn" class="logout-btn" onclick="logout()">ุชุณุฌูู ุฎุฑูุฌ</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Navigation Tabs -->
        <nav class="nav-tabs">
            <button class="tab-btn active" data-tab="download">ุงูุฑุฆูุณูุฉ</button>
            <button class="tab-btn" data-tab="search">๐ ุจุญุซ</button>
            <button class="tab-btn" data-tab="queue">ุชูุฒููุงุชู</button>
            <button class="tab-btn" data-tab="favorites">โญ ุงูููุถูุฉ</button>
            <button class="tab-btn" data-tab="my-playlists">๐ ููุงุฆูู</button>
            <button class="tab-btn" data-tab="cloud">ุงูุณุญุงุจุฉ</button>
            <button class="tab-btn" data-tab="ai">ูุณุงุนุฏ ุงูุฐูุงุก ุงูุงุตุทูุงุนู</button>
            <button class="tab-btn" data-tab="extract">ุฃุฏูุงุช ุงูุงุณุชุฎุฑุงุฌ</button>
            <button class="tab-btn" data-tab="trending">ุงูุฑุงุฆุฌ</button>
            <button class="tab-btn" data-tab="playlist">ููุงุฆู ุงูุชุดุบูู</button>
            <button class="tab-btn" data-tab="history">ุงูุณุฌู</button>
            <button class="tab-btn" data-tab="stats">๐ ุงูุฅุญุตุงุฆูุงุช</button>
        </nav>
    </header>

    <div class="app-container">
        <main class="main-content">

            <!-- ========== Home / Download Tab ========== -->
            <section id="downloadTab" class="tab-content active">
                <div class="home-container">
                    <!-- Hero Section -->
                    <div class="home-hero">
                        <div class="hero-text">
                            <h2>ูู ุจุชูุฒูู ููุงุทุน ุงูููุฏูู ุงูููุถูุฉ ูุฏูู ุจุณุฑุนุฉ ูุงุฆูุฉ</h2>
                            <p>ูุฏุนู ููุชููุจุ ููุณุจููุ ุงูุณุชุบุฑุงู ูุงููุฒูุฏ. ุงุณุชุฎุฏู ููุฒุงุช ุงูุชุญููู ุงูุณุญุงุจู ููุณุงุนุฏ ุงูู AI ูุชุญุณูู
                                ุชุฌุฑุจุชู.</p>
                        </div>
                    </div>

                    <!-- ๐ฐ AD PLACEMENT #1 (Top Banner) -->
                    <!-- ุถุน ููุฏ ุงูุฅุนูุงู ููุง (ูุซูุงู ุจุงูุฑ 728x90) -->
                    <div id="ad-spot-top" class="ad-container"
                        style="margin: 20px auto; text-align: center; max-width: 100%; overflow: hidden;">
                        <!-- PLACE AD CODE HERE -->
                    </div>

                    <!-- Search Bar -->
                    <div class="search-form-container">
                        <div class="search-input-wrapper">
                            <input type="text" id="videoUrl" placeholder="ุงูุตู ุฑุงุจุท ุงูููุฏูู ููุง..." autocomplete="off">
                            <button id="fetchBtn" class="btn-search-action">ุชูุฒูู</button>
                        </div>
                    </div>

                    <!-- Features Links -->
                    <div class="features-quick-links">
                        <span class="feature-link"><i class="icon">โ๏ธ</i> ุชุญููู ุณุญุงุจู ูุจุงุดุฑ</span>
                        <span class="feature-link"><i class="icon">โจ</i> ุชุญุณูู ุงูุฌูุฏุฉ ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู</span>
                    </div>
                </div>

                <!-- Video Info Section -->
                <div id="videoInfo" class="video-info hidden">
                    <div class="video-preview">
                        <img id="thumbnail" src="" alt="ุตูุฑุฉ ุงูููุฏูู">
                        <div class="duration-badge" id="duration"></div>
                        <button id="previewBtn" class="preview-play-btn" title="ูุนุงููุฉ">โถ๏ธ</button>
                        <button id="downloadThumbBtn" class="download-thumb-btn" title="ุชุญููู ุงูุตูุฑุฉ">๐ท</button>
                        <button id="makeGifBtn" class="make-gif-btn" title="ุชุญููู ูู GIF">๐๏ธ</button>
                    </div>
                    <div class="video-details">
                        <h3 id="videoTitle"></h3>
                        <div class="video-meta">
                            <span id="channelName">๐บ </span>
                            <span id="viewCount">๐๏ธ </span>
                            <span id="uploadDate">๐ </span>
                            <span id="likeCount">๐ </span>
                        </div>
                        <div class="video-stats">
                            <span id="estimatedSize" class="stat-badge">๐พ --</span>
                            <span id="videoQualityBadge" class="stat-badge quality-badge">๐ฌ --</span>
                            <span id="hasSubsBadge" class="stat-badge hidden">๐ ุชุฑุฌูุงุช</span>
                            <span id="isLiveBadge" class="stat-badge hidden">๐ด ุจุซ ูุจุงุดุฑ</span>
                        </div>
                        <!-- Star Rating -->
                        <div class="rating-container">
                            <span class="rating-label">ูููู ุงูุฌูุฏุฉ:</span>
                            <div class="star-rating" id="starRating">
                                <span class="star" data-rating="1">โ</span>
                                <span class="star" data-rating="2">โ</span>
                                <span class="star" data-rating="3">โ</span>
                                <span class="star" data-rating="4">โ</span>
                                <span class="star" data-rating="5">โ</span>
                            </div>
                        </div>
                        <div class="video-actions">
                            <button class="quick-btn"
                                onclick="openCinemaMode(state.currentVideo?.embedUrl, state.currentVideo?.title)">๐ฌ ูุถุน
                                ุงูุณูููุง</button>
                            <button class="quick-btn" onclick="shareVideo()">๐ ูุดุงุฑูุฉ</button>
                            <button class="quick-btn" onclick="scheduleDownload()">๐ ุฌุฏููุฉ</button>
                        </div>
                    </div>
                </div>

                <!-- Download Options Section -->
                <div id="downloadOptions" class="download-options hidden">
                    <div class="options-header">
                        <h2>โ๏ธ ุฎูุงุฑุงุช ุงูุชุญููู</h2>
                        <div class="options-tabs">
                            <button class="option-tab active" data-option="video">๐ฌ ููุฏูู</button>
                            <button class="option-tab" data-option="audio">๐ต ุตูุช</button>
                            <button class="option-tab" data-option="gif">๐๏ธ GIF</button>
                            <button class="option-tab" data-option="frames">๐ผ๏ธ ุตูุฑ</button>
                        </div>
                    </div>

                    <!-- Video Options -->
                    <div id="videoOptions" class="option-panel active">
                        <div class="options-grid">
                            <div class="option-group">
                                <label>๐ฌ ุงูุฌูุฏุฉ</label>
                                <select id="quality"></select>
                            </div>
                            <div class="option-group">
                                <label>๐ฆ ุงูุตูุบุฉ</label>
                                <select id="formatSelect">
                                    <option value="mp4">MP4 (ุงูุฃูุถู)</option>
                                    <option value="mkv">MKV</option>
                                    <option value="webm">WebM</option>
                                    <option value="avi">AVI</option>
                                </select>
                            </div>
                            <div class="option-group">
                                <label>๐ ุงููุฌูุฏ</label>
                                <input type="text" id="outputPath" placeholder="ุงููุฌูุฏ ุงูุงูุชุฑุงุถู">
                            </div>
                            <div class="option-group">
                                <label>๐ ุงุณู ุงูููู</label>
                                <input type="text" id="filename" placeholder="ุงุณู ุชููุงุฆู">
                            </div>
                        </div>

                        <!-- Advanced Options -->
                        <div class="advanced-section">
                            <button class="toggle-advanced" onclick="toggleAdvanced('video')">
                                ุฎูุงุฑุงุช ูุชูุฏูุฉ โผ
                            </button>
                            <div id="advancedVideo" class="advanced-options hidden">
                                <div class="option-row">
                                    <label>โฑ๏ธ ูุต ุงูููุฏูู</label>
                                    <div class="time-inputs">
                                        <input type="text" id="startTime" placeholder="0:00">
                                        <span>โ</span>
                                        <input type="text" id="endTime" placeholder="ููุงูุฉ">
                                    </div>
                                </div>
                                <div class="option-row">
                                    <label>โก ุณุฑุนุฉ ุงูููุฏูู</label>
                                    <div class="speed-control">
                                        <input type="range" id="videoSpeed" min="0.25" max="4" step="0.25" value="1">
                                        <span id="speedValue">1x</span>
                                    </div>
                                </div>
                                <div class="checkbox-row">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="downloadSubs">
                                        <span>๐ ุชุญููู ุงูุชุฑุฌูุงุช</span>
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="embedMetadata" checked>
                                        <span>ุงูุจูุงูุงุช ุงููุตููุฉ</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Audio Options -->
                    <div id="audioOptions" class="option-panel hidden">
                        <div class="options-grid">
                            <div class="option-group">
                                <label>๐ต ุตูุบุฉ ุงูุตูุช</label>
                                <select id="audioFormat">
                                    <option value="mp3">MP3</option>
                                    <option value="aac">AAC</option>
                                    <option value="flac">FLAC (ุนุงูู ุงูุฌูุฏุฉ)</option>
                                    <option value="wav">WAV</option>
                                    <option value="m4a">M4A</option>
                                </select>
                            </div>
                            <div class="option-group">
                                <label>๐๏ธ ุฌูุฏุฉ ุงูุตูุช</label>
                                <select id="audioBitrate">
                                    <option value="320">320 kbps (ุนุงูู)</option>
                                    <option value="256">256 kbps</option>
                                    <option value="192">192 kbps</option>
                                    <option value="128">128 kbps</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- GIF Options -->
                    <div id="gifOptions" class="option-panel hidden">
                        <div class="options-grid">
                            <div class="option-group">
                                <label>โฑ๏ธ ูู (ุซุงููุฉ)</label>
                                <input type="number" id="gifStart" value="0" min="0">
                            </div>
                            <div class="option-group">
                                <label>โฑ๏ธ ุงููุฏุฉ (ุซุงููุฉ)</label>
                                <input type="number" id="gifDuration" value="5" min="1" max="30">
                            </div>
                            <div class="option-group">
                                <label>๐ ุงูุนุฑุถ (ุจูุณู)</label>
                                <input type="number" id="gifWidth" value="480" min="100" max="1920">
                            </div>
                            <div class="option-group">
                                <label>๐๏ธ FPS</label>
                                <select id="gifFps">
                                    <option value="10">10 (ุตุบูุฑ ุงูุญุฌู)</option>
                                    <option value="15" selected>15 (ูุชูุงุฒู)</option>
                                    <option value="24">24 (ุณูููุงุฆู)</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Frames Options -->
                    <div id="framesOptions" class="option-panel hidden">
                        <div class="options-grid">
                            <div class="option-group">
                                <label>๐ฏ ููุน ุงูุงุณุชุฎุฑุงุฌ</label>
                                <select id="framesType">
                                    <option value="interval">ูู X ุซุงููุฉ</option>
                                    <option value="count">ุนุฏุฏ ูุญุฏุฏ</option>
                                    <option value="keyframes">ุงูุฅุทุงุฑุงุช ุงูุฑุฆูุณูุฉ</option>
                                </select>
                            </div>
                            <div class="option-group">
                                <label>๐ข ุงููุงุตู/ุงูุนุฏุฏ</label>
                                <input type="number" id="framesValue" value="5" min="1">
                            </div>
                            <div class="option-group">
                                <label>๐ฆ ุตูุบุฉ ุงูุตูุฑ</label>
                                <select id="framesFormat">
                                    <option value="jpg">JPG</option>
                                    <option value="png">PNG</option>
                                    <option value="webp">WebP</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Download Button -->
                    <div class="download-buttons">
                        <button id="downloadBtn" class="btn-download">
                            <span class="btn-icon">โฌ๏ธ</span>
                            <span class="btn-text">ุชุญููู</span>
                        </button>
                        <button id="addToQueueBtn" class="btn btn-secondary">โ ุฅุถุงูุฉ ููุทุงุจูุฑ</button>
                    </div>
                </div>

                <!-- Progress Section -->
                <div id="progressSection" class="progress-section hidden">
                    <div class="progress-header">
                        <h2>๐ ุญุงูุฉ ุงูุชุญููู</h2>
                        <div class="progress-actions">
                            <button id="pauseDownload" class="action-btn" title="ุฅููุงู ูุคูุช"
                                onclick="pauseDownload()">โธ๏ธ</button>
                            <button id="resumeDownload" class="action-btn hidden" title="ุงุณุชุฆูุงู"
                                onclick="resumeDownload()">โถ๏ธ</button>
                            <button id="cancelDownload" class="action-btn danger" title="ุฅูุบุงุก"
                                onclick="cancelDownload()">โ</button>
                        </div>
                    </div>
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div id="progressFill" class="progress-fill"></div>
                        </div>
                        <div class="progress-info">
                            <span id="progressPercent">0%</span>
                            <span id="progressSpeed">--</span>
                            <span id="progressEta">--</span>
                            <span id="progressSize">--</span>
                        </div>
                    </div>
                    <div id="progressStatus" class="progress-status">ุฌุงุฑู ุงูุชุญุถูุฑ...</div>
                </div>

                <!-- Success Section -->
                <div id="successSection" class="success-section hidden">
                    <div class="success-animation">
                        <div class="success-icon">โ</div>
                    </div>
                    <h2>ุชู ุงูุชุญููู ุจูุฌุงุญ!</h2>
                    <p id="downloadedFilePath">ุชู ุญูุธ ุงูููู</p>
                    <div class="success-stats">
                        <span class="success-stat">๐ฆ <span id="finalSize">--</span></span>
                        <span class="success-stat">โฑ๏ธ <span id="downloadTime">--</span></span>
                    </div>
                    <div class="success-actions">
                        <button id="openFolderBtn" class="btn btn-secondary">๐ ูุชุญ ุงููุฌูุฏ</button>
                        <button id="playFileBtn" class="btn btn-secondary">โถ๏ธ ุชุดุบูู</button>
                        <button id="newDownloadBtn" class="btn btn-primary">โฌ๏ธ ุชุญููู ุขุฎุฑ</button>
                    </div>
                </div>
            </section>

            <!-- ========== Search Tab ========== -->
            <section id="searchTab" class="tab-content hidden">
                <div class="cloud-header-section">
                    <h2>๐ ุงูุจุญุซ ูู ููุชููุจ</h2>
                    <p>ุงุจุญุซ ุนู ุงูููุฏูููุงุช ููู ุจุชุญููููุง ุฃู ุฅุถุงูุชูุง ููุทุงุจูุฑ ูุจุงุดุฑุฉ</p>
                </div>

                <!-- Search Input -->
                <div class="search-form-container">
                    <div class="search-input-wrapper">
                        <input type="text" id="searchQuery" placeholder="ุงุจุญุซ ุนู ููุฏูู ูู ููุชููุจ...">
                        <button id="searchBtn" class="btn-search-action">๐ ุจุญุซ</button>
                    </div>
                </div>

                <!-- Search Results -->
                <div id="searchResults" class="cloud-grid" style="margin-top: 30px;">
                    <div class="empty-state" style="grid-column: 1 / -1;">
                        <span style="font-size: 3rem;">๐</span>
                        <p>ุงูุชุจ ูููุฉ ุงูุจุญุซ ูุงุถุบุท ุจุญุซ</p>
                        <small>ุณูุชู ุนุฑุถ ูุชุงุฆุฌ ุงูุจุญุซ ููุง</small>
                    </div>
                </div>
            </section>

            <!-- ========== Queue / Downloads Tab ========== -->
            <section id="queueTab" class="tab-content hidden">
                <div class="cloud-header-section">
                    <h2>๐ฅ ูุงุฆูุฉ ุงูุงูุชุธุงุฑ</h2>
                    <p>ุฅุฏุงุฑุฉ ุงูุชูุฒููุงุช - ุชุญููู ุฏูุนุฉ ูุงุญุฏุฉ ุฃู ูุงุญุฏ ุชูู ุงูุขุฎุฑ</p>
                </div>

                <!-- Download Mode Selection -->
                <div class="card" style="max-width: 800px; margin: 0 auto 20px; padding: 20px;">
                    <h3 style="margin-bottom: 16px; font-size: 1.1rem;">โก ูุถุน ุงูุชุญููู</h3>
                    <div style="display: flex; gap: 16px; flex-wrap: wrap;">
                        <label class="radio-card" style="flex: 1; min-width: 200px;">
                            <input type="radio" name="downloadMode" value="turbo" checked>
                            <div class="radio-card-content">
                                <span style="font-size: 1.5rem;">๐</span>
                                <strong>ุชุญููู ุณุฑูุน (Turbo)</strong>
                                <small>ุชุญููู 10+ ููุฏูููุงุช ูุนุงู ุจุณุฑุนุฉ ุฎุฑุงููุฉ</small>
                            </div>
                        </label>
                        <label class="radio-card" style="flex: 1; min-width: 200px;">
                            <input type="radio" name="downloadMode" value="sequential">
                            <div class="radio-card-content">
                                <span style="font-size: 1.5rem;">๐</span>
                                <strong>ุชุญููู ูุชุชุงุจุน</strong>
                                <small>ุชุญููู ููุฏูู ุชูู ุงูุขุฎุฑ ุจุงูุชุฑุชูุจ</small>
                            </div>
                        </label>
                    </div>
                </div>

                <!-- Bulk Add URLs Section -->
                <div class="card" style="max-width: 800px; margin: 0 auto 20px; padding: 20px;">
                    <h3 style="margin-bottom: 16px; font-size: 1.1rem;">๐ ุฅุถุงูุฉ ุฑูุงุจุท ูุชุนุฏุฏุฉ</h3>
                    <textarea id="bulkUrlsInput"
                        placeholder="ุฃูุตู ุงูุฑูุงุจุท ููุง (ูู ุฑุงุจุท ูู ุณุทุฑ ุฌุฏูุฏ)...&#10;https://youtube.com/watch?v=video1&#10;https://youtube.com/watch?v=video2&#10;https://youtube.com/watch?v=video3"
                        style="width: 100%; height: 120px; border: 2px dashed var(--border-color); border-radius: 12px; padding: 15px; font-size: 0.95rem; resize: vertical; background: var(--bg-secondary);"></textarea>
                    <div style="display: flex; gap: 10px; margin-top: 15px; flex-wrap: wrap;">
                        <button onclick="addBulkUrls()" class="btn btn-primary" style="flex: 1; min-width: 150px;">
                            โ ุฅุถุงูุฉ ููุทุงุจูุฑ
                        </button>
                        <button onclick="downloadAllBulk()" class="btn btn-primary"
                            style="flex: 1; min-width: 150px; background: linear-gradient(135deg, #22c55e, #16a34a);">
                            ๐ ุชุญููู ุงููู ูุจุงุดุฑุฉ
                        </button>
                        <button onclick="clearBulkInput()" class="btn btn-secondary" style="min-width: 100px;">
                            ๐๏ธ ูุณุญ
                        </button>
                    </div>
                    <div id="bulkStatus" style="margin-top: 10px; font-size: 0.9rem; color: var(--text-secondary);">
                    </div>
                </div>

                <!-- Queue Actions -->
                <div class="section-header-row" style="max-width: 800px; margin: 0 auto;">
                    <div style="display: flex; gap: 8px;">
                        <button id="btnActiveQueue" class="btn btn-primary"
                            onclick="switchQueueView('active')">ุงูุชูุฒููุงุช ุงููุดุทุฉ</button>
                        <button id="btnCompletedQueue" class="btn btn-secondary"
                            onclick="switchQueueView('completed')">ููุชููุฉ</button>
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <button id="startQueueBtn" class="btn btn-primary"
                            style="background: linear-gradient(135deg, #22c55e, #16a34a);">
                            ๐ ุจุฏุก ุงูุชุญููู
                        </button>
                        <button id="pauseQueueBtn" class="btn btn-secondary">โธ๏ธ ุฅููุงู</button>
                        <button id="clearQueueBtn" class="btn btn-outline danger">๐๏ธ ูุณุญ</button>
                    </div>
                </div>

                <!-- Queue Progress -->
                <div id="queueProgress" class="hidden" style="max-width: 800px; margin: 20px auto;">
                    <div class="card" style="padding: 16px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <span id="queueProgressText">ุฌุงุฑู ุงูุชุญููู...</span>
                            <span id="queueProgressPercent">0/0</span>
                        </div>
                        <div class="progress-bar-line">
                            <div class="progress-fill-blue" id="queueProgressFill" style="width: 0%"></div>
                        </div>
                    </div>
                </div>

                <!-- Queue List (Legacy - Active Only) -->
                <div class="clean-queue-list" id="queueListMain" style="max-width: 800px; margin: 20px auto;">
                    <div class="empty-state">
                        <span style="font-size: 3rem;">๐ญ</span>
                        <p>ุงูุทุงุจูุฑ ูุงุฑุบ ุญุงููุงู</p>
                        <small>ุฃุถู ููุฏูููุงุช ูู ุงูุจุญุซ ุฃู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ</small>
                    </div>
                </div>

                <!-- NEW Downloads Grid (Stable & Beautiful) -->
                <!-- REDESIGNED LIBRARY (Robust List View) -->
                <div id="libraryContainer" style="display:none; max-width: 1000px; margin: 20px auto;">
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom:15px; border-bottom:1px solid var(--border-color);">
                        <div style="display:flex; align-items:center; gap:10px;">
                            <h3 style="margin: 0; font-size:1.4rem;">๐ฆ ุงูููุชุจุฉ</h3>
                            <span id="libCountBadge"
                                style="background:var(--primary-bg); color:var(--primary); padding:2px 8px; border-radius:12px; font-size:0.8rem;">0</span>
                        </div>
                        <div style="display:flex; gap:10px;">
                            <button onclick="loadLibraryContent()" class="btn btn-secondary"
                                style="padding: 8px 16px;">๐ ุชุญุฏูุซ</button>
                            <button onclick="openFolderUI()" class="btn btn-secondary" title="ูุชุญ ุงููุฌูุฏ">๐</button>
                        </div>
                    </div>

                    <!-- Content Area (Restored GRID Layout) -->
                    <div id="libraryContent"
                        style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; padding: 10px;">
                        <!-- Items injected via JS -->
                    </div>
                </div>
            </section>

            <!-- ========== Cloud Tab ========== -->
            <section id="cloudTab" class="tab-content hidden">
                <div class="cloud-container">
                    <div class="cloud-header-section">
                        <h2>ุฏูุฌ ุงูุชุญููู ุงูุณุญุงุจู</h2>
                        <p>ุงุฑุจุท ุณุญุงุจุฉ Google Drive ูุญูุธ ุงููููุงุช ูุจุงุดุฑุฉ. ูุชุทูุจ ุฐูู ุฅุนุฏุงุฏ ุชุทุจูู ุฎุงุต ุจู.</p>
                    </div>

                    <!-- Setup Screen (Default if not connected) -->
                    <div id="driveSetupScreen" class="settings-card" style="max-width: 600px; margin: 0 auto;">
                        <h3>๐ ุฑุจุท Google Drive (ูุชูุฏู)</h3>
                        <p style="font-size: 0.9rem; color: #666; margin-bottom: 20px;">
                            ูุธุฑุงู ูุณูุงุณุงุช ุฌูุฌูุ ูุฌุจ ุนููู ุงุณุชุฎุฏุงู "ููุงุชูุญ ุงููุทูุฑ" ุงูุฎุงุตุฉ ุจู.
                            <br>
                            1. ุงุฐูุจ ูู <a href="https://console.cloud.google.com/" target="_blank">Google Console</a>
                            ูุฃูุดุฆ ูุดุฑูุนุงู.
                            <br>
                            2. ูุนู Google Drive API ูุฃูุดุฆ ุจูุงูุงุช OAuth (Desktop App).
                        </p>

                        <div class="form-group" style="margin-bottom: 15px;">
                            <label>Client ID</label>
                            <input type="text" id="gDriveClientId" class="input-modern"
                                placeholder="xxxxx.apps.googleusercontent.com">
                        </div>
                        <div class="form-group" style="margin-bottom: 15px;">
                            <label>Client Secret</label>
                            <input type="password" id="gDriveClientSecret" class="input-modern"
                                placeholder="GOCSPX-xxxxx">
                        </div>

                        <div style="display: flex; gap: 10px; margin-top: 20px;">
                            <button class="btn btn-primary" onclick="generateDriveAuthLink()">๐ 1. ุชูููุฏ ุฑุงุจุท
                                ุงูุตูุงุญูุฉ</button>
                        </div>

                        <div id="driveAuthCodeSection" class="hidden"
                            style="margin-top: 20px; border-top: 1px solid #eee; padding-top: 20px;">
                            <p style="font-size: 0.9rem;">ุจุนุฏ ุงูููุงููุฉุ ุงูุณุฎ ุงูููุฏ ุงูุฐู ูุธูุฑ ูุงูุตูู ููุง:</p>
                            <div class="form-group">
                                <label>ุฑูุฒ ุงููุตุงุฏูุฉ (Auth Code)</label>
                                <input type="text" id="gDriveAuthCode" class="input-modern" placeholder="4/0A...">
                            </div>
                            <button class="btn btn-success" onclick="completeDriveSetup()"
                                style="width: 100%; margin-top: 10px;">โ 2. ุฅุชูุงู ุงูุฑุจุท</button>
                        </div>
                    </div>

                    <!-- Connected Screen (Hidden by default) -->
                    <div id="driveConnectedScreen" class="cloud-grid hidden">
                        <!-- Google Drive -->
                        <div class="cloud-card active">
                            <div class="cloud-icon-wrapper">
                                <span style="font-size: 2.5rem;">๐</span>
                            </div>
                            <h3>Google Drive</h3>
                            <p class="connected-status">ูุชุตู ุจูุฌุงุญ โ</p>
                            <div class="cloud-actions">
                                <button class="btn btn-secondary btn-full">ุฅุนุฏุงุฏ ุงููุฌูุฏ</button>
                                <button class="btn btn-outline danger btn-full" onclick="disconnectDrive()">ูุตู
                                    ุงูุญุณุงุจ</button>
                            </div>
                        </div>

                        <!-- Drive Settings -->
                        <div class="settings-section" style="margin-top: 20px; text-align: right;">
                            <h3>โก ุฅุนุฏุงุฏุงุช ุงูุณุญุงุจุฉ</h3>
                            <div class="form-group checkbox-group">
                                <input type="checkbox" id="autoUpload" class="checkbox-modern">
                                <label for="autoUpload">ุฑูุน ุชููุงุฆู ููุณุญุงุจุฉ ุจุนุฏ ุงูุชุญููู</label>
                            </div>
                            <div class="form-group checkbox-group">
                                <input type="checkbox" id="deleteAfterUpload" class="checkbox-modern">
                                <label for="deleteAfterUpload">ุญุฐู ุงูููู ุงููุญูู ุจุนุฏ ุงูุฑูุน (ุชูููุฑ ุงููุณุงุญุฉ)</label>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ========== AI Assistant Tab ========== -->
            <section id="aiTab" class="tab-content hidden">
                <!-- AI Setup Screen -->
                <div id="aiSetupScreen" class="ai-container"
                    style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%;">
                    <div class="settings-card" style="max-width: 500px; text-align: center; padding: 40px;">
                        <span style="font-size: 4rem;">๐ง</span>
                        <h2>ุชูุนูู ุงูุฐูุงุก ุงูุงุตุทูุงุนู</h2>
                        <p style="color: #666; margin: 15px 0;">
                            ูุงุณุชุฎุฏุงู ููุฒุงุช Geminiุ ูุฌุจ ุฅุฏุฎุงู ููุชุงุญ API ุงูุฎุงุต ุจู ูู Google AI Studio.
                        </p>
                        <div class="form-group" style="text-align: right; margin-bottom: 20px;">
                            <label>Gemini API Key</label>
                            <input type="password" id="geminiApiKeyInput" class="input-modern" placeholder="AIzaSy...">
                            <small><a href="https://aistudio.google.com/app/apikey" target="_blank">ุงุญุตู ุนูู ุงูููุชุงุญ ูู
                                    ููุง</a></small>
                        </div>
                        <button class="btn btn-primary btn-lg" style="width: 100%;" onclick="saveAiKey()">ุญูุธ ูุจุฏุก
                            ุงููุญุงุฏุซุฉ</button>
                    </div>
                </div>

                <!-- Chat Interface (Hidden by default) -->
                <div id="aiChatInterface" class="ai-container hidden">
                    <div class="chat-header">
                        <div class="chat-model-info">
                            <span class="model-badge">Gemini Pro</span>
                            <span class="status-dot online"></span>
                        </div>
                        <button class="btn-clear-chat" onclick="clearChat()">ูุณุญ ุงููุญุงุฏุซุฉ ๐๏ธ</button>
                        <button class="btn-icon" onclick="logoutAi()" title="ุชุบููุฑ ุงูููุชุงุญ">๐</button>
                    </div>

                    <div class="chat-messages" id="chatMessages">
                        <div class="message bot">
                            <div class="message-avatar">๐ค</div>
                            <div class="message-content">
                                ุฃููุงู ุจู! ุฃูุง ูุณุงุนุฏู ุงูุฐูู. ูููููู ูุณุงุนุฏุชู ูู ุงุณุชุฎุฑุงุฌ ุงููุนูููุงุช ูู ุงูููุฏูููุงุชุ ุฃู
                                ุงูุฅุฌุงุจุฉ ุนูู ุงุณุชูุณุงุฑุงุชู.
                            </div>
                        </div>
                    </div>

                    <div class="chat-input-area">
                        <input type="text" id="chatInput" placeholder="ุงูุชุจ ุณุคุงูู ููุง..."
                            onkeypress="handleChatInput(event)">
                        <button class="btn-send" onclick="sendMessage()">
                            <span>ุฅุฑุณุงู</span>
                            โค
                        </button>
                    </div>
                </div>
            </section>


            <!-- ========== Extract Tab ========== -->
            <section id="extractTab" class="tab-content hidden">
                <div class="cloud-header-section">
                    <h2>๐๏ธ ุฃุฏูุงุช ุงูุงุณุชุฎุฑุงุฌ ุงููุชูุฏูุฉ</h2>
                    <p>ุงุณุชุฎุฑุฌ ุงูุตูุชุ ุงูุตูุฑุ ุงูุชุฑุฌูุงุชุ ูุงูุจูุงูุงุช ูู ุฃู ููุฏูู</p>
                </div>

                <!-- URL Input for Extract -->
                <div class="search-form-container">
                    <div class="search-input-wrapper">
                        <input type="text" id="extractUrl" placeholder="ุงูุตู ุฑุงุจุท ุงูููุฏูู ููุง ููุงุณุชุฎุฑุงุฌ...">
                        <button id="analyzeVideoBtn" class="btn-search-action">ุชุญููู</button>
                    </div>
                </div>

                <!-- Video Preview (shows after analysis) -->
                <div id="extractPreview" class="hidden" style="max-width: 800px; margin: 0 auto 30px;">
                    <div class="card">
                        <div style="display: flex; gap: 20px; align-items: center;">
                            <img id="extractThumb" src="" alt=""
                                style="width: 160px; height: 90px; border-radius: 8px; object-fit: cover; background: var(--bg-secondary);">
                            <div style="flex: 1;">
                                <h3 id="extractTitle" style="font-size: 1.1rem; margin-bottom: 8px;">ุนููุงู ุงูููุฏูู</h3>
                                <p id="extractChannel" style="color: var(--text-secondary); font-size: 0.9rem;">๐บ ุงุณู
                                    ุงูููุงุฉ</p>
                                <p id="extractDuration" style="color: var(--text-muted); font-size: 0.85rem;">โฑ๏ธ ุงููุฏุฉ
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Extraction Tools Grid -->
                <div class="cloud-grid" style="max-width: 1000px; margin: 0 auto;">
                    <!-- Audio Extraction -->
                    <div class="cloud-card">
                        <div class="cloud-icon-wrapper">
                            <span style="font-size: 2.5rem;">๐ต</span>
                        </div>
                        <h3>ุงุณุชุฎุฑุงุฌ ุงูุตูุช</h3>
                        <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 16px;">ุญููู ุงูููุฏูู
                            ุฅูู ููู ุตูุชู MP3 ุฃู M4A</p>
                        <div style="margin-bottom: 12px;">
                            <select id="extractAudioFormat" class="modern-select" style="width: 100%;">
                                <option value="mp3">MP3 (ุงูุฃูุซุฑ ุชูุงููุงู)</option>
                                <option value="m4a">M4A (ุฌูุฏุฉ ุนุงููุฉ)</option>
                                <option value="flac">FLAC (ุจุฏูู ุถุบุท)</option>
                                <option value="wav">WAV</option>
                            </select>
                        </div>
                        <button onclick="extractAudio()" class="btn btn-primary btn-full">โฌ๏ธ ุชูุฒูู ุงูุตูุช</button>
                    </div>

                    <!-- Video Trimming -->
                    <div class="cloud-card">
                        <div class="cloud-icon-wrapper">
                            <span style="font-size: 2.5rem;">โ๏ธ</span>
                        </div>
                        <h3>ูุต ุงูููุฏูู</h3>
                        <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 16px;">ูู ุจูุต ุฌุฒุก ูุนูู
                            ูู ุงูููุฏูู</p>
                        <div style="display: flex; gap: 10px; margin-bottom: 12px;">
                            <div style="flex: 1;">
                                <label style="font-size: 0.8rem; color: var(--text-muted);">ุจุฏุงูุฉ</label>
                                <input type="text" id="trimStart" value="00:00" placeholder="0:00"
                                    style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 6px; font-family: inherit;">
                            </div>
                            <div style="flex: 1;">
                                <label style="font-size: 0.8rem; color: var(--text-muted);">ููุงูุฉ</label>
                                <input type="text" id="trimEnd" value="" placeholder="ููุงูุฉ"
                                    style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 6px; font-family: inherit;">
                            </div>
                        </div>
                        <button onclick="trimVideo()" class="btn btn-primary btn-full">โ๏ธ ูุต ูุชูุฒูู</button>
                    </div>

                    <!-- Thumbnail Download -->
                    <div class="cloud-card">
                        <div class="cloud-icon-wrapper">
                            <span style="font-size: 2.5rem;">๐ผ๏ธ</span>
                        </div>
                        <h3>ุงูุตูุฑุฉ ุงููุตุบุฑุฉ</h3>
                        <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 16px;">ุชุญููู ุตูุฑุฉ
                            ุงูููุฏูู ุจุฃุนูู ุฌูุฏุฉ</p>
                        <div id="thumbnailPreview"
                            style="background: var(--bg-secondary); height: 80px; border-radius: 8px; margin-bottom: 12px; display: flex; align-items: center; justify-content: center; overflow: hidden;">
                            <span style="color: var(--text-muted);">ูุนุงููุฉ ุงูุตูุฑุฉ</span>
                        </div>
                        <button onclick="downloadThumbnailHQ()" class="btn btn-primary btn-full">โฌ๏ธ ุชุญููู
                            ุงูุตูุฑุฉ</button>
                    </div>

                    <!-- Subtitles -->
                    <div class="cloud-card">
                        <div class="cloud-icon-wrapper">
                            <span style="font-size: 2.5rem;">๐</span>
                        </div>
                        <h3>ุงูุชุฑุฌูุงุช</h3>
                        <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 16px;">ุงุณุชุฎุฑุฌ ุงูุชุฑุฌูุงุช
                            ุงููุชุงุญุฉ ููููุฏูู</p>
                        <div style="margin-bottom: 12px;">
                            <select id="subtitleLang" class="modern-select" style="width: 100%;">
                                <option value="ar">ุงูุนุฑุจูุฉ</option>
                                <option value="en">English</option>
                                <option value="auto">ุชููุงุฆูุฉ (Auto)</option>
                            </select>
                        </div>
                        <button onclick="extractSubtitles()" class="btn btn-primary btn-full">โฌ๏ธ ุชุญููู ุงูุชุฑุฌูุงุช</button>
                    </div>

                    <!-- Comments -->
                    <div class="cloud-card">
                        <div class="cloud-icon-wrapper">
                            <span style="font-size: 2.5rem;">๐ฌ</span>
                        </div>
                        <h3>ุงูุชุนูููุงุช</h3>
                        <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 16px;">ุงุณุชุฎุฑุฌ ุฃูุถู
                            ุงูุชุนูููุงุช ูู ุงูููุฏูู</p>
                        <div style="margin-bottom: 12px;">
                            <select id="commentsCount" class="modern-select" style="width: 100%;">
                                <option value="50">50 ุชุนููู</option>
                                <option value="100">100 ุชุนููู</option>
                                <option value="200">200 ุชุนููู</option>
                            </select>
                        </div>
                        <button onclick="extractComments()" class="btn btn-primary btn-full">๐ฅ ุงุณุชุฎุฑุงุฌ
                            ุงูุชุนูููุงุช</button>
                    </div>

                    <!-- Metadata -->
                    <div class="cloud-card">
                        <div class="cloud-icon-wrapper">
                            <span style="font-size: 2.5rem;">๐</span>
                        </div>
                        <h3>ุงูุจูุงูุงุช ุงููุตููุฉ</h3>
                        <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 16px;">ูุนูููุงุช ุชูุตูููุฉ
                            ุนู ุงูููุฏูู</p>
                        <button onclick="showMetadata()" class="btn btn-secondary btn-full"
                            style="margin-bottom: 8px;">๐๏ธ ุนุฑุถ
                            ุงูุจูุงูุงุช</button>
                        <button onclick="downloadMetadata()" class="btn btn-primary btn-full">โฌ๏ธ ุชุตุฏูุฑ JSON</button>
                    </div>

                    <!-- Video Compression -->
                    <div class="cloud-card">
                        <div class="cloud-icon-wrapper">
                            <span style="font-size: 2.5rem;">๐๏ธ</span>
                        </div>
                        <h3>ุถุบุท ุงูููุฏูู</h3>
                        <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 16px;">ุชูููู ุญุฌู
                            ุงูููุฏูู ูุน ุงูุญูุงุธ ุนูู ุงูุฌูุฏุฉ</p>
                        <div style="margin-bottom: 12px;">
                            <select id="compressQuality" class="modern-select" style="width: 100%;">
                                <option value="high">ุฌูุฏุฉ ุนุงููุฉ (ุญุฌู ุฃูุจุฑ)</option>
                                <option value="medium" selected>ุฌูุฏุฉ ูุชูุณุทุฉ (ูุชูุงุฒู)</option>
                                <option value="low">ุฌูุฏุฉ ููุฎูุถุฉ (ุญุฌู ุตุบูุฑ)</option>
                            </select>
                        </div>
                        <input type="text" id="compressFilename" placeholder="ุงุณู ุงูููู ูู ูุฌูุฏ downloads"
                            style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 6px; margin-bottom: 12px;">
                        <button onclick="compressVideoUI()" class="btn btn-primary btn-full">๐๏ธ ุถุบุท</button>
                    </div>

                    <!-- Video Merge -->
                    <div class="cloud-card">
                        <div class="cloud-icon-wrapper">
                            <span style="font-size: 2.5rem;">๐</span>
                        </div>
                        <h3>ุฏูุฌ ููุฏูููุงุช</h3>
                        <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 16px;">ุงุฏูุฌ ุนุฏุฉ
                            ููุฏูููุงุช ูู ููู ูุงุญุฏ</p>
                        <textarea id="mergeFiles"
                            placeholder="ุงูุชุจ ุฃุณูุงุก ุงููููุงุช (ูู ููู ูู ุณุทุฑ)&#10;ูุซุงู:&#10;video1.mp4&#10;video2.mp4"
                            style="width: 100%; height: 100px; padding: 10px; border: 1px solid var(--border-color); border-radius: 6px; resize: none; font-family: inherit; margin-bottom: 12px;"></textarea>
                        <button onclick="mergeVideosUI()" class="btn btn-primary btn-full">๐ ุฏูุฌ</button>
                    </div>

                    <!-- Convert to GIF -->
                    <div class="cloud-card">
                        <div class="cloud-icon-wrapper">
                            <span style="font-size: 2.5rem;">๐ฌ</span>
                        </div>
                        <h3>ุชุญููู ูู GIF</h3>
                        <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 16px;">ุญููู ููุทุน ูู
                            ุงูููุฏูู ุฅูู ุตูุฑุฉ ูุชุญุฑูุฉ</p>
                        <input type="text" id="gifFilename" placeholder="ุงุณู ุงูููู"
                            style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 6px; margin-bottom: 8px;">
                        <div style="display: flex; gap: 8px; margin-bottom: 12px;">
                            <input type="number" id="gifStartSec" placeholder="ุจุฏุงูุฉ (ุซุง)" value="0" min="0"
                                style="flex: 1; padding: 10px; border: 1px solid var(--border-color); border-radius: 6px;">
                            <input type="number" id="gifDurationSec" placeholder="ูุฏุฉ (ุซุง)" value="5" min="1" max="30"
                                style="flex: 1; padding: 10px; border: 1px solid var(--border-color); border-radius: 6px;">
                        </div>
                        <button onclick="convertToGifUI()" class="btn btn-primary btn-full">๐ฌ ุชุญููู ูู GIF</button>
                    </div>

                    <!-- Universal Converter -->
                    <div class="cloud-card">
                        <div class="cloud-icon-wrapper">
                            <span style="font-size: 2.5rem;">๐</span>
                        </div>
                        <h3>ูุญูู ุงูุตูุบ ุงูุดุงูู</h3>
                        <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 16px;">ุญููู ุฃู ููุฏูู
                            ูุฃู ุตูุบุฉ ุชุฑูุฏูุง</p>
                        <input type="text" id="convertFilename" placeholder="ุงุณู ุงูููู (ูุซุงู: video.mp4)"
                            style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 6px; margin-bottom: 8px;">
                        <div style="margin-bottom: 12px;">
                            <select id="convertFormat" class="modern-select" style="width: 100%;">
                                <optgroup label="ููุฏูู">
                                    <option value="mp4">MP4 (ุชูุงูู ุนุงูู)</option>
                                    <option value="mkv">MKV (ุฌูุฏุฉ ุนุงููุฉ)</option>
                                    <option value="avi">AVI</option>
                                    <option value="mov">MOV (Apple)</option>
                                    <option value="flv">FLV</option>
                                    <option value="webm">WebM</option>
                                </optgroup>
                                <optgroup label="ุตูุช">
                                    <option value="mp3">MP3</option>
                                    <option value="wav">WAV (ุบูุฑ ูุถุบูุท)</option>
                                    <option value="m4a">M4A</option>
                                    <option value="flac">FLAC (ุณุชูุฏูู)</option>
                                </optgroup>
                            </select>
                        </div>
                        <button onclick="convertMediaUI()" class="btn btn-primary btn-full">๐ ุชุญููู ุงูุขู</button>
                    </div>

                    <!-- Audio Remover (Mute) -->
                    <div class="cloud-card">
                        <div class="cloud-icon-wrapper">
                            <span style="font-size: 2.5rem;">๐</span>
                        </div>
                        <h3>ุฅุฒุงูุฉ ุงูุตูุช</h3>
                        <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 16px;">ุฅูุดุงุก ูุณุฎุฉ
                            ุตุงูุชุฉ ุชูุงูุงู ูู ุงูููุฏูู</p>
                        <input type="text" id="muteFilename" placeholder="ุงุณู ุงูููู"
                            style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 6px; margin-bottom: 12px;">
                        <button onclick="muteVideoUI()" class="btn btn-secondary btn-full">๐ ูุชู ุงูุตูุช</button>
                    </div>
                </div>

                <!-- Extraction Results Modal -->
                <div id="extractResults" class="card hidden" style="max-width: 800px; margin: 30px auto 0;">
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                        <h3 id="extractResultTitle">ุงููุชุงุฆุฌ</h3>
                        <div style="display: flex; gap: 8px;">
                            <button onclick="copyExtractResults()" class="btn btn-secondary">๐ ูุณุฎ</button>
                            <button onclick="downloadExtractResults()" class="btn btn-secondary">โฌ๏ธ ุชูุฒูู</button>
                            <button onclick="closeExtractResults()" class="btn btn-secondary">โ</button>
                        </div>
                    </div>
                    <pre id="extractResultContent"
                        style="background: var(--bg-secondary); padding: 16px; border-radius: 8px; max-height: 400px; overflow: auto; white-space: pre-wrap; font-size: 0.9rem;"></pre>
                </div>

                <!-- Progress Indicator -->
                <div id="extractProgress" class="hidden" style="max-width: 600px; margin: 30px auto 0;">
                    <div class="card">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                            <span id="extractProgressText">ุฌุงุฑู ุงูุงุณุชุฎุฑุงุฌ...</span>
                            <span id="extractProgressPercent">0%</span>
                        </div>
                        <div class="progress-bar-line">
                            <div id="extractProgressBar" class="progress-fill-blue" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ========== Trending Tab ========== -->
            <!-- ========== Trending Tab (Rebuilt) ========== -->
            <section id="trendingTab" class="tab-content hidden">
                <div class="cloud-header-section">
                    <h2>๐ฅ ุงูููุฏูููุงุช ุงูุฑุงุฆุฌุฉ</h2>
                    <p>ุงูุชุดู ูุง ูุดุงูุฏู ุงูุนุงูู ุงูููู</p>
                </div>

                <div class="search-form-container" style="max-width: 500px;">
                    <div style="display: flex; gap: 10px;">
                        <select id="trendingRegion" class="modern-select" style="flex: 1; padding: 12px;">
                            <option value="SA">ุงูุณุนูุฏูุฉ ๐ธ๐ฆ</option>
                            <option value="EG">ูุตุฑ ๐ช๐ฌ</option>
                            <option value="AE">ุงูุฅูุงุฑุงุช ๐ฆ๐ช</option>
                            <option value="DZ">ุงูุฌุฒุงุฆุฑ ๐ฉ๐ฟ</option>
                            <option value="MA">ุงููุบุฑุจ ๐ฒ๐ฆ</option>
                            <option value="IQ">ุงูุนุฑุงู ๐ฎ๐ถ</option>
                            <option value="JO">ุงูุฃุฑุฏู ๐ฏ๐ด</option>
                            <option value="KW">ุงููููุช ๐ฐ๐ผ</option>
                            <option value="QA">ูุทุฑ ๐ถ๐ฆ</option>
                            <option value="BH">ุงูุจุญุฑูู ๐ง๐ญ</option>
                            <option value="OM">ุนูุงู ๐ด๐ฒ</option>
                            <option value="LB">ูุจูุงู ๐ฑ๐ง</option>
                            <option value="PS">ููุณุทูู ๐ต๐ธ</option>
                            <option value="TN">ุชููุณ ๐น๐ณ</option>
                            <option value="LY">ููุจูุง ๐ฑ๐พ</option>
                            <option value="YE">ุงูููู ๐พ๐ช</option>
                            <option value="SD">ุงูุณูุฏุงู ๐ธ๐ฉ</option>
                            <option value="SY">ุณูุฑูุง ๐ธ๐พ</option>
                            <option value="US">ุฃูุฑููุง (Global) ๐บ๐ธ</option>
                        </select>
                        <button id="loadTrendingBtn" class="btn btn-primary" onclick="loadTrending()">
                            ๐ ุชุญุฏูุซ
                        </button>
                    </div>
                </div>

                <div id="trendingResults" class="cloud-grid" style="margin-top: 30px; min-height: 200px;">
                    <div class="empty-state">
                        <span style="font-size: 3rem;">๐</span>
                        <p>ุงุฎุชุฑ ุงูุฏููุฉ ุซู ุงุถุบุท ุชุญุฏูุซ</p>
                    </div>
                </div>
            </section>

            <!-- ========== Playlist Tab ========== -->
            <section id="playlistTab" class="tab-content hidden">
                <div class="cloud-header-section">
                    <h2>๐ ููุงุฆู ุงูุชุดุบูู</h2>
                    <p>ุชุญููู ูููุงุช ูุงููุฉ ุฃู ููุงุฆู ุชุดุบูู ุจุถุบุทุฉ ุฒุฑ</p>
                </div>

                <div class="search-form-container">
                    <div class="search-input-wrapper">
                        <input type="text" id="playlistUrl"
                            placeholder="ุฑุงุจุท ุงููุงุฆูุฉ ุฃู ุงูููุงุฉ (Playlist/Channel URL)...">
                        <button id="fetchPlaylistBtn" class="btn-search-action">ุฌูุจ</button>
                    </div>
                </div>

                <div class="cloud-settings-section" style="max-width: 800px; margin: 0 auto 30px;">
                    <h3>ุฎูุงุฑุงุช ุงููุงุฆูุฉ</h3>
                    <div style="display: flex; gap: 20px; flex-wrap: wrap; margin-top: 16px;">
                        <select id="playlistQuality" class="modern-select">
                            <option value="best">ุฃูุถู ุฌูุฏุฉ</option>
                            <option value="1080">1080p</option>
                            <option value="720">720p</option>
                            <option value="audio">๐ต ุตูุช ููุท (MP3)</option>
                        </select>
                    </div>
                </div>

                <div id="playlistInfo" class="section-header-row hidden">
                    <h3 id="playlistTitle">ุนููุงู ุงููุงุฆูุฉ</h3>
                    <span id="playlistStats" class="queue-meta">0 ููุฏูู</span>
                </div>

                <div id="playlistVideos" class="clean-queue-list"></div>

                <div class="hidden" id="playlistActions"
                    style="margin-top: 20px; display: flex; justify-content: center; gap: 15px;">
                    <button id="downloadPlaylistBtn" class="btn btn-primary">โฌ๏ธ ุชุญููู ุงููุญุฏุฏ</button>
                    <button id="addPlaylistToQueue" class="btn btn-secondary">โ ุฅุถุงูุฉ ููุทุงุจูุฑ</button>
                </div>
            </section>

            <!-- ========== Favorites Tab ========== -->
            <section id="favoritesTab" class="tab-content hidden">
                <div class="cloud-header-section">
                    <h2>โญ ุงูููุถูุฉ</h2>
                    <p>ููุฏูููุงุชู ุงููุญููุธุฉ - ุชุญุชุงุฌ ุชุณุฌูู ุงูุฏุฎูู</p>
                </div>

                <!-- Login Required Message -->
                <div id="favoritesLoginRequired" class="card"
                    style="max-width: 500px; margin: 40px auto; text-align: center; padding: 40px;">
                    <span style="font-size: 4rem;">๐</span>
                    <h3 style="margin: 20px 0;">ุณุฌู ุฏุฎููู ูุฑุคูุฉ ุงูููุถูุฉ</h3>
                    <p style="color: var(--text-secondary); margin-bottom: 20px;">ุงุญูุธ ููุฏูููุงุชู ุงูููุถูุฉ ูุฒุงูููุง ุนุจุฑ
                        ุฃุฌูุฒุชู</p>
                    <button onclick="openAuthModal()" class="btn btn-primary"
                        style="padding: 12px 30px; font-size: 1rem;">
                        ๐ ุชุณุฌูู ุงูุฏุฎูู ุจู Google
                    </button>
                </div>

                <!-- Favorites Content (shown when logged in) -->
                <div id="favoritesContent" class="hidden" style="max-width: 900px; margin: 0 auto;">
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <span id="favoritesCount" style="color: var(--text-secondary);">0 ููุฏูู</span>
                        <button onclick="loadFavorites()" class="btn btn-secondary">๐ ุชุญุฏูุซ</button>
                    </div>
                    <div id="favoritesList"
                        style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px;">
                        <!-- Favorites loaded via JS -->
                    </div>
                </div>
            </section>

            <!-- ========== My Playlists Tab ========== -->
            <section id="my-playlistsTab" class="tab-content hidden">
                <div class="cloud-header-section">
                    <h2>๐ ููุงุฆูู ุงูุดุฎุตูุฉ</h2>
                    <p>ุฃูุดุฆ ููุงุฆู ุชุดุบูู ุฎุงุตุฉ ุจู ูุดุงุฑููุง</p>
                </div>

                <!-- Login Required Message -->
                <div id="playlistsLoginRequired" class="card"
                    style="max-width: 500px; margin: 40px auto; text-align: center; padding: 40px;">
                    <span style="font-size: 4rem;">๐</span>
                    <h3 style="margin: 20px 0;">ุณุฌู ุฏุฎููู ูุฅูุดุงุก ููุงุฆู</h3>
                    <p style="color: var(--text-secondary); margin-bottom: 20px;">ุฃูุดุฆ ููุงุฆู ุชุดุบูู ูุฎุตุตุฉ ูุดุงุฑููุง ูุน
                        ุงูุขุฎุฑูู</p>
                    <button onclick="openAuthModal()" class="btn btn-primary"
                        style="padding: 12px 30px; font-size: 1rem;">
                        ๐ ุชุณุฌูู ุงูุฏุฎูู ุจู Google
                    </button>
                </div>

                <!-- Playlists Content (shown when logged in) -->
                <div id="playlistsContent" class="hidden" style="max-width: 900px; margin: 0 auto;">
                    <!-- Create New Playlist -->
                    <div class="card" style="padding: 20px; margin-bottom: 20px;">
                        <h3 style="margin-bottom: 15px;">โ ุฅูุดุงุก ูุงุฆูุฉ ุฌุฏูุฏุฉ</h3>
                        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                            <input type="text" id="newPlaylistName" placeholder="ุงุณู ุงููุงุฆูุฉ..."
                                style="flex: 1; min-width: 200px; padding: 12px; border-radius: 8px; border: 1px solid var(--border-color);">
                            <label style="display: flex; align-items: center; gap: 5px;">
                                <input type="checkbox" id="newPlaylistPublic"> ุนุงูุฉ
                            </label>
                            <button onclick="createPlaylist()" class="btn btn-primary">ุฅูุดุงุก</button>
                        </div>
                    </div>

                    <!-- Playlists List -->
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <span id="playlistsCount" style="color: var(--text-secondary);">0 ูุงุฆูุฉ</span>
                        <div style="display: flex; gap: 10px;">
                            <button onclick="openDiscoverPlaylists()" class="btn"
                                style="background: #9c27b0; color: white;">๐ ุงูุชุดู ููุงุฆู ุนุงูุฉ</button>
                            <button onclick="loadMyPlaylists()" class="btn btn-secondary">๐ ุชุญุฏูุซ</button>
                        </div>
                    </div>
                    <div id="myPlaylistsList"
                        style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px;">
                        <!-- Playlists loaded via JS -->
                    </div>
                </div>
            </section>

            <!-- ========== History Tab ========== -->
            <section id="historyTab" class="tab-content hidden">
                <div class="history-container">
                    <div class="history-header">
                        <h2>ุณุฌู ุงูุชูุฒููุงุช</h2>
                        <div class="history-filters">
                            <div class="filter-group">
                                <label>ููุชุฑุฉ ุญุณุจ:</label>
                                <select id="historyFilter" class="modern-select">
                                    <option value="all">ุงููู</option>
                                    <option value="video">ููุฏูู</option>
                                    <option value="audio">ุตูุช</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <input type="text" id="historySearch" placeholder="ุจุญุซ ูู ุงูุชูุฒููุงุช..."
                                    class="filter-input">
                            </div>
                        </div>
                    </div>

                    <div class="clean-table-responsive">
                        <table class="clean-table">
                            <thead>
                                <tr>
                                    <th>ุงุณู ุงูููู</th>
                                    <th>ุชุงุฑูุฎ ุงูุชูุฒูู</th>
                                    <th>ุงูุญุฌู</th>
                                    <th>ุงูุญุงูุฉ</th>
                                    <th>ุงูุฅุฌุฑุงุกุงุช</th>
                                </tr>
                            </thead>
                            <tbody id="historyTableBody">
                                <tr>
                                    <td>
                                        <div class="file-cell">
                                            <span class="file-icon">๐ฅ</span>
                                            <span>ุทุจูุนุฉ ุฎูุงุจุฉ 4K.mp4</span>
                                        </div>
                                    </td>
                                    <td>2024-01-15</td>
                                    <td>1.2 GB</td>
                                    <td><span class="status-badge complete">โ ููุชูู</span></td>
                                    <td>
                                        <div class="actions-cell">
                                            <a href="#" class="action-link">โฌ๏ธ ุฅุนุงุฏุฉ ุงูุชูุฒูู</a>
                                            <a href="#" class="action-link">โ๏ธ ููู ููุณุญุงุจุฉ</a>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <div class="file-cell">
                                            <span class="file-icon">๐ฅ</span>
                                            <span>ููุฏูู ุชุนูููู ุจุงูุซูู.mov</span>
                                        </div>
                                    </td>
                                    <td>2024-01-10</td>
                                    <td>450 MB</td>
                                    <td><span class="status-badge deleted">โ ูุญุฐูู</span></td>
                                    <td>
                                        <div class="actions-cell">
                                            <a href="#" class="action-link">๐ ุงุณุชุนุงุฏุฉ</a>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <div class="file-cell">
                                            <span class="file-icon">๐ฅ</span>
                                            <span>ููุทุน ูุถุญู.avi</span>
                                        </div>
                                    </td>
                                    <td>2024-01-05</td>
                                    <td>120 MB</td>
                                    <td><span class="status-badge cloud">โ๏ธ ููุชูู ูู ุงูุณุญุงุจุฉ</span></td>
                                    <td>
                                        <div class="actions-cell">
                                            <a href="#" class="action-link">๐๏ธ ุนุฑุถ</a>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <div class="pagination">
                            <button class="page-btn">โ</button>
                            <span class="page-info">ุงูุตูุญุฉ 1 ูู 5</span>
                            <button class="page-btn">โถ</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ========== History Tab (Supabase) ========== -->
            <section id="historyTab" class="tab-content">
                <div class="section-header">
                    <h2>๐ ุณุฌู ุงูุชุญูููุงุช</h2>
                    <p>ุชุญูููุงุชู ุงูุณุงุจูุฉ ุงููุญููุธุฉ ูู ุญุณุงุจู</p>
                </div>
                <div class="history-actions"
                    style="margin-bottom: 1rem; display: flex; gap: 1rem; justify-content: flex-end;">
                    <button onclick="loadHistory()" class="btn-secondary">๐ ุชุญุฏูุซ</button>
                </div>
                <div id="historyContent" class="history-list">
                    <div class="history-empty">
                        <p>๐</p>
                        <p>ูุฑุฌู ุชุณุฌูู ุงูุฏุฎูู ูุนุฑุถ ุณุฌู ุงูุชุญูููุงุช</p>
                    </div>
                </div>
            </section>

            <!-- ========== Statistics Tab ========== -->
            <section id="statsTab" class="tab-content hidden">
                <div class="section-header">
                    <h2>๐ ููุญุฉ ุงูุฅุญุตุงุฆูุงุช</h2>
                    <p>ุฅุญุตุงุฆูุงุช ุงูุงุณุชุฎุฏุงู ูุงูุฃุฏุงุก ูู ุงูููุช ุงูุญูููู</p>
                </div>

                <div
                    style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; max-width: 1200px; margin: 0 auto;">

                    <!-- Total Downloads Card -->
                    <div class="card"
                        style="padding: 25px; text-align: center; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                        <div style="font-size: 3rem; margin-bottom: 10px;">๐ฅ</div>
                        <div id="statTotalDownloads" style="font-size: 2.5rem; font-weight: bold; color: white;">0</div>
                        <div style="color: rgba(255,255,255,0.8);">ุฅุฌูุงูู ุงูุชุญูููุงุช</div>
                    </div>

                    <!-- Today Downloads Card -->
                    <div class="card"
                        style="padding: 25px; text-align: center; background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);">
                        <div style="font-size: 3rem; margin-bottom: 10px;">๐</div>
                        <div id="statTodayDownloads" style="font-size: 2.5rem; font-weight: bold; color: white;">0</div>
                        <div style="color: rgba(255,255,255,0.8);">ุชุญูููุงุช ุงูููู</div>
                    </div>

                    <!-- Total Size Card -->
                    <div class="card"
                        style="padding: 25px; text-align: center; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                        <div style="font-size: 3rem; margin-bottom: 10px;">๐พ</div>
                        <div id="statTotalSize" style="font-size: 2.5rem; font-weight: bold; color: white;">0 MB</div>
                        <div style="color: rgba(255,255,255,0.8);">ุงูุญุฌู ุงูุฅุฌูุงูู</div>
                    </div>

                    <!-- Cache Size Card -->
                    <div class="card"
                        style="padding: 25px; text-align: center; background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                        <div style="font-size: 3rem; margin-bottom: 10px;">โก</div>
                        <div id="statCacheSize" style="font-size: 2.5rem; font-weight: bold; color: white;">0</div>
                        <div style="color: rgba(255,255,255,0.8);">ูุชุงุฆุฌ ูุฎุฒูุฉ (Cache)</div>
                    </div>
                </div>

                <!-- Platform Stats -->
                <div class="card" style="padding: 25px; margin: 20px auto; max-width: 800px;">
                    <h3 style="margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                        ๐ ุงูุชุญูููุงุช ุญุณุจ ุงูููุตุฉ
                    </h3>
                    <div id="statPlatforms" style="display: flex; flex-wrap: wrap; gap: 15px; justify-content: center;">
                        <div
                            style="padding: 15px 25px; background: var(--bg-secondary); border-radius: 10px; text-align: center;">
                            <span style="font-size: 1.5rem;">๐ฅ</span>
                            <div style="font-weight: bold; margin-top: 5px;">YouTube</div>
                            <div id="statYouTube" style="color: var(--accent-color);">0</div>
                        </div>
                        <div
                            style="padding: 15px 25px; background: var(--bg-secondary); border-radius: 10px; text-align: center;">
                            <span style="font-size: 1.5rem;">๐ต</span>
                            <div style="font-weight: bold; margin-top: 5px;">TikTok</div>
                            <div id="statTikTok" style="color: var(--accent-color);">0</div>
                        </div>
                        <div
                            style="padding: 15px 25px; background: var(--bg-secondary); border-radius: 10px; text-align: center;">
                            <span style="font-size: 1.5rem;">๐ธ</span>
                            <div style="font-weight: bold; margin-top: 5px;">Instagram</div>
                            <div id="statInstagram" style="color: var(--accent-color);">0</div>
                        </div>
                        <div
                            style="padding: 15px 25px; background: var(--bg-secondary); border-radius: 10px; text-align: center;">
                            <span style="font-size: 1.5rem;">๐</span>
                            <div style="font-weight: bold; margin-top: 5px;">Pinterest</div>
                            <div id="statPinterest" style="color: var(--accent-color);">0</div>
                        </div>
                    </div>
                </div>

                <!-- Server Info -->
                <div class="card" style="padding: 25px; margin: 20px auto; max-width: 800px;">
                    <h3 style="margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                        ๐ฅ๏ธ ูุนูููุงุช ุงูุฎุงุฏู
                    </h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                        <div style="padding: 15px; background: var(--bg-secondary); border-radius: 8px;">
                            <div style="color: var(--text-secondary); font-size: 0.9rem;">ููุช ุงูุชุดุบูู</div>
                            <div id="statUptime" style="font-size: 1.2rem; font-weight: bold; margin-top: 5px;">--</div>
                        </div>
                        <div style="padding: 15px; background: var(--bg-secondary); border-radius: 8px;">
                            <div style="color: var(--text-secondary); font-size: 0.9rem;">ุงุณุชุฎุฏุงู ุงูุฐุงูุฑุฉ</div>
                            <div id="statMemory" style="font-size: 1.2rem; font-weight: bold; margin-top: 5px;">--</div>
                        </div>
                    </div>
                </div>

                <!-- Actions -->
                <div style="text-align: center; margin-top: 20px;">
                    <button onclick="loadStats()" class="btn btn-primary" style="padding: 12px 30px;">
                        ๐ ุชุญุฏูุซ ุงูุฅุญุตุงุฆูุงุช
                    </button>
                </div>
            </section>

        </main>

        <!-- Footer -->
        <footer class="footer">
            <p>ยฉ 2024 ุชุญููู ุจูุณ. ุฌููุน ุงูุญููู ูุญููุธุฉ.</p>
            <p><a href="#">ุนู ุงูุฎุฏูุฉ</a> | <a href="#">ุณูุงุณุฉ ุงูุฎุตูุตูุฉ</a> | <a href="#">ุดุฑูุท ุงูุงุณุชุฎุฏุงู</a> | <a
                    href="#">ุงูุฏุนู ุงูููู</a></p>
        </footer>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>โ๏ธ ุงูุฅุนุฏุงุฏุงุช</h2>
                <button class="modal-close" onclick="closeModal('settingsModal')">โ</button>
            </div>
            <div class="modal-body">
                <div class="form-row">
                    <label>๐ ูุฌูุฏ ุงูุญูุธ ุงูุงูุชุฑุงุถู</label>
                    <input type="text" id="defaultPath" class="modern-select">
                </div>
                <div class="form-row">
                    <label>๐ฌ ุงูุฌูุฏุฉ ุงูุงูุชุฑุงุถูุฉ</label>
                    <select id="defaultQuality" class="modern-select">
                        <option value="best">ุฃูุถู ุฌูุฏุฉ</option>
                        <option value="1080">1080p</option>
                        <option value="720">720p</option>
                    </select>
                </div>
                <div class="form-row">
                    <label class="checkbox-label">
                        <input type="checkbox" id="notifyOnComplete" checked>
                        <span>ุฅุดุนุงุฑ ุนูุฏ ุงูุชูุงู ุงูุชุญููู</span>
                    </label>
                </div>
                <div class="form-row">
                    <label class="checkbox-label">
                        <input type="checkbox" id="soundOnComplete" checked>
                        <span>ุตูุช ุนูุฏ ุงูุงูุชูุงู</span>
                    </label>
                </div>
                <button id="saveSettingsBtn" class="btn btn-primary btn-full mt-20">๐พ ุญูุธ ุงูุฅุนุฏุงุฏุงุช</button>
            </div>
        </div>
    </div>

    <!-- Stats Modal -->
    <div id="statsModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>๐ ุงูุฅุญุตุงุฆูุงุช</h2>
                <button class="modal-close" onclick="closeModal('statsModal')">โ</button>
            </div>
            <div class="modal-body">
                <div class="cloud-grid">
                    <div class="card" style="text-align: center;">
                        <div style="font-size: 2rem; color: var(--primary);">๐ฅ</div>
                        <div style="font-size: 1.5rem; font-weight: 700;" id="totalDownloads">0</div>
                        <div style="color: var(--text-muted);">ุฅุฌูุงูู ุงูุชุญูููุงุช</div>
                    </div>
                    <div class="card" style="text-align: center;">
                        <div style="font-size: 2rem; color: var(--primary);">๐</div>
                        <div style="font-size: 1.5rem; font-weight: 700;" id="totalSize">0 GB</div>
                        <div style="color: var(--text-muted);">ุงูุญุฌู ุงูููู</div>
                    </div>
                    <div class="card" style="text-align: center;">
                        <div style="font-size: 2rem; color: var(--primary);">๐</div>
                        <div style="font-size: 1.5rem; font-weight: 700;" id="todayDownloads">0</div>
                        <div style="color: var(--text-muted);">ุชุญูููุงุช ุงูููู</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Keyboard Shortcuts Modal -->
    <div id="keyboardModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>โจ๏ธ ุงุฎุชุตุงุฑุงุช ููุญุฉ ุงูููุงุชูุญ</h2>
                <button class="modal-close" onclick="closeModal('keyboardModal')">โ</button>
            </div>
            <div class="modal-body">
                <div style="display: flex; flex-direction: column; gap: 12px;">
                    <div
                        style="display: flex; justify-content: space-between; padding: 10px; background: var(--bg-secondary); border-radius: 8px;">
                        <span>ูุตู ููุนุงูุฌุฉ</span>
                        <span
                            style="font-family: monospace; background: white; padding: 4px 8px; border-radius: 4px;">Ctrl
                            + V</span>
                    </div>
                    <div
                        style="display: flex; justify-content: space-between; padding: 10px; background: var(--bg-secondary); border-radius: 8px;">
                        <span>ุจุฏุก ุงูุชุญููู</span>
                        <span
                            style="font-family: monospace; background: white; padding: 4px 8px; border-radius: 4px;">Ctrl
                            + Enter</span>
                    </div>
                    <div
                        style="display: flex; justify-content: space-between; padding: 10px; background: var(--bg-secondary); border-radius: 8px;">
                        <span>ุฅุถุงูุฉ ููุทุงุจูุฑ</span>
                        <span
                            style="font-family: monospace; background: white; padding: 4px 8px; border-radius: 4px;">Ctrl
                            + Q</span>
                    </div>
                    <div
                        style="display: flex; justify-content: space-between; padding: 10px; background: var(--bg-secondary); border-radius: 8px;">
                        <span>ุงูุฅุนุฏุงุฏุงุช</span>
                        <span
                            style="font-family: monospace; background: white; padding: 4px 8px; border-radius: 4px;">Ctrl
                            + S</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Container -->
    <div id="notifications" class="notifications"></div>

    <!-- Drop Zone Overlay -->
    <div id="dropZone" class="drop-zone hidden">
        <div class="drop-content">
            <span class="drop-icon">๐ฅ</span>
            <p>ุงุณุญุจ ุงูุฑุงุจุท ููุง</p>
        </div>
    </div>

    <!-- Preview Modal -->
    <div id="previewModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>โถ๏ธ ูุนุงููุฉ ุงูููุฏูู</h2>
                <button class="modal-close" onclick="closeModal('previewModal')">โ</button>
            </div>
            <div class="modal-body">
                <iframe id="previewFrame" src="" allowfullscreen
                    style="width: 100%; height: 400px; border: none; border-radius: 8px;"></iframe>
            </div>
        </div>
    </div>

    <!-- Video Player Modal (Local Files) -->
    <div id="videoPlayerModal" class="modal hidden" style="background: rgba(0,0,0,0.95); z-index: 2000;">
        <div class="modal-content" style="max-width: 900px; background: #000; border: 1px solid #333;">
            <div class="modal-header" style="border-bottom: 1px solid #333;">
                <h2 id="videoPlayerTitle" style="color: #fff;">โถ๏ธ ูุดุบู ุงูููุฏูู</h2>
                <button class="modal-close" onclick="closeVideoPlayer()" style="color: #fff;">โ</button>
            </div>
            <div class="modal-body" style="padding: 0;">
                <video id="mainVideoPlayer" controls style="width: 100%; max-height: 80vh; outline: none;">
                    <source src="" type="video/mp4">
                    ูุชุตูุญู ูุง ูุฏุนู ุชุดุบูู ุงูููุฏูู.
                </video>
            </div>
        </div>
    </div>

    <!-- NEW: Library Specific Player (Isolated) -->
    <div id="libraryPlayerModal" class="modal hidden" style="background: rgba(0,0,0,0.98); z-index: 2100;">
        <div class="modal-content"
            style="max-width: 1000px; background: #0f0f0f; border: 1px solid #333; box-shadow: 0 0 50px rgba(0,0,0,0.5);">
            <div class="modal-header" style="border-bottom: 1px solid #222; padding: 15px 20px;">
                <h2 id="libPlayerTitle"
                    style="color: #fff; font-size: 1.1rem; display:flex; gap:10px; align-items:center;">
                    <span style="color:var(--primary);">โถ๏ธ</span>
                    <span id="libPlayerTitleText">ูุดุบู ุงููุณุงุฆุท</span>
                </h2>
                <div class="player-controls-header" style="display:flex; gap:10px; margin-left:auto;">
                    <button onclick="toggleCinemaMode()" title="ูุถุน ุงูุณูููุง"
                        style="background:none; border:none; font-size:1.2rem; cursor:pointer; opacity:0.7;">๐</button>
                    <button onclick="togglePiP()" title="ุตูุฑุฉ ุฏุงุฎู ุตูุฑุฉ"
                        style="background:none; border:none; font-size:1.2rem; cursor:pointer; opacity:0.7;">๐ผ๏ธ</button>
                    <button onclick="closeLibraryPlayer()"
                        style="color: #aaa; background:none; border:none; font-size:1.5rem; cursor:pointer;">โ</button>
                </div>
            </div>
            <div class="modal-body"
                style="padding: 0; background:black; display:flex; justify-content:center; align-items:center; min-height:400px;">
                <video id="libVideoPlayer" controls autoplay style="width: 100%; max-height: 85vh; outline: none;">
                    <source src="" type="video/mp4">
                    ุงููุชุตูุญ ูุง ูุฏุนู ุงูุชุดุบูู.
                </video>
            </div>
        </div>
    </div>

    <!-- Auth Modal -->
    <div id="authModal" class="modal auth-modal hidden">
        <div class="modal-content auth-content">
            <div class="modal-header">
                <h3 id="authTitle">ุชุณุฌูู ุงูุฏุฎูู</h3>
                <button onclick="closeAuthModal()" class="close-btn">โ</button>
            </div>
            <div class="modal-body auth-body">
                <!-- Google Sign In Button -->
                <button onclick="signInWithGoogle()" class="google-signin-btn"
                    style="width: 100%; padding: 14px; border: 1px solid #ddd; border-radius: 8px; background: white; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 12px; font-size: 1rem; margin-bottom: 20px; transition: all 0.3s;">
                    <svg width="20" height="20" viewBox="0 0 24 24">
                        <path fill="#4285F4"
                            d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" />
                        <path fill="#34A853"
                            d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" />
                        <path fill="#FBBC05"
                            d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" />
                        <path fill="#EA4335"
                            d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" />
                    </svg>
                    <span>ุชุณุฌูู ุงูุฏุฎูู ุจู Google</span>
                </button>

                <div style="display: flex; align-items: center; margin-bottom: 20px;">
                    <hr style="flex: 1; border: none; border-top: 1px solid var(--border-color);">
                    <span style="padding: 0 15px; color: var(--text-secondary); font-size: 0.9rem;">ุฃู</span>
                    <hr style="flex: 1; border: none; border-top: 1px solid var(--border-color);">
                </div>

                <form id="authForm">
                    <div class="form-group">
                        <label for="authEmail">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
                        <input type="email" id="authEmail" required placeholder="example@email.com">
                    </div>
                    <div class="form-group">
                        <label for="authPassword">ูููุฉ ุงููุฑูุฑ</label>
                        <input type="password" id="authPassword" required placeholder="โขโขโขโขโขโขโขโข" minlength="6">
                    </div>
                    <div id="authError" class="auth-error hidden"></div>
                    <button type="submit" id="authSubmit" class="btn-primary auth-submit">ุฏุฎูู</button>
                </form>
                <div class="auth-switch">
                    <span id="authSwitchText">ููุณ ูุฏูู ุญุณุงุจุ</span>
                    <button type="button" id="authSwitchBtn" onclick="toggleAuthMode()">ุฅูุดุงุก ุญุณุงุจ</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Schedule Download Modal -->
    <div id="scheduleModal" class="modal hidden">
        <div class="modal-content" style="max-width: 400px;">
            <div class="modal-header">
                <h3>๐ ุฌุฏููุฉ ุงูุชุญููู</h3>
                <button class="modal-close" onclick="closeScheduleModal()">โ</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>ุงูุชุงุฑูุฎ ูุงูููุช</label>
                    <input type="datetime-local" id="scheduleDateTime" class="form-input">
                </div>
                <div class="form-group">
                    <label>ุงูุฌูุฏุฉ</label>
                    <select id="scheduleQuality" class="form-input">
                        <option value="best">ุฃูุถู ุฌูุฏุฉ</option>
                        <option value="1080p">1080p</option>
                        <option value="720p">720p</option>
                        <option value="480p">480p</option>
                    </select>
                </div>
                <button onclick="confirmSchedule()" class="btn-primary" style="width: 100%; margin-top: 1rem;">
                    โ ุชุฃููุฏ ุงูุฌุฏููุฉ
                </button>
            </div>
        </div>
    </div>

    <!-- Theme Picker Modal -->
    <div id="themeModal" class="modal hidden">
        <div class="modal-content" style="max-width: 400px;">
            <div class="modal-header">
                <h3>๐จ ุงุฎุชุฑ ุงูุซูู</h3>
                <button class="modal-close" onclick="closeThemeModal()">โ</button>
            </div>
            <div class="modal-body">
                <div class="theme-options">
                    <button class="theme-btn" onclick="setColorTheme('blue')" style="background: #1976d2;">ุฃุฒุฑู</button>
                    <button class="theme-btn" onclick="setColorTheme('purple')"
                        style="background: #7c3aed;">ุจููุณุฌู</button>
                    <button class="theme-btn" onclick="setColorTheme('green')"
                        style="background: #059669;">ุฃุฎุถุฑ</button>
                    <button class="theme-btn" onclick="setColorTheme('red')" style="background: #dc2626;">ุฃุญูุฑ</button>
                    <button class="theme-btn" onclick="setColorTheme('orange')"
                        style="background: #ea580c;">ุจุฑุชูุงูู</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Share Link Modal -->
    <div id="shareLinkModal" class="modal hidden">
        <div class="modal-content" style="max-width: 450px;">
            <div class="modal-header">
                <h3>๐ ุฑุงุจุท ุงููุดุงุฑูุฉ</h3>
                <button class="modal-close" onclick="closeShareModal()">โ</button>
            </div>
            <div class="modal-body">
                <div class="share-url-container">
                    <input type="text" id="shareUrlInput" class="form-input" readonly>
                    <button onclick="copyShareLink()" class="btn-secondary">๐ ูุณุฎ</button>
                </div>
                <p class="share-info">๐ ููุชูู ุจุนุฏ 24 ุณุงุนุฉ</p>
            </div>
        </div>
    </div>

    <script src="app.js?v=30"></script>
</body>

</html>